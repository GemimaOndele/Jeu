const box = document.querySelector('.box');
const scoreElement = document.querySelector('#score');
let click = 0;
let chrono = 30;
const chronoElement = document.querySelector('#chrono');
chronoElement.innerHTML = chrono;

// Récupération du score précédent depuis Local Storage
const previousScore = localStorage.getItem('score');
if (previousScore) {
  click = parseInt(previousScore);
  scoreElement.innerHTML = click;
}

// Afficher le meilleur score précédent depuis Local Storage
const highScoreElement = document.querySelector('#high-score');
const previousHighScore = localStorage.getItem('highScore');
if (previousHighScore) {
  highScoreElement.innerHTML = previousHighScore;
}

box.addEventListener("click", () => {
  console.log('click sur la box !');
  click += 1;
  scoreElement.innerHTML = click;

  // Stockage du score actuel dans Local Storage et mise à jour du meilleur score
  localStorage.setItem('score', click);
  if (click > parseInt(previousHighScore)) {
    localStorage.setItem('highScore', click);
    highScoreElement.innerHTML = click;
  }

  let top = Math.floor(Math.random() * window.innerHeight);
  let left = Math.floor(Math.random() * window.innerWidth);

  box.style.top = `${top}px`;
  box.style.left = `${left}px`;
});

const intervalId = setInterval(() => {
  console.log("timer");
  if (chrono !== 0) {
    chrono--;
    chronoElement.innerHTML = chrono;
  } else {
    clearInterval(intervalId);
  }
}, 1000);

// Ajouter un bouton pour réinitialiser le score
const resetButton = document.querySelector('#reset-button');
resetButton.addEventListener("click", () => {
  click = 0;
  scoreElement.innerHTML = click;
  localStorage.removeItem('score');
});


    chronoElement.innerHTML = chrono;
  } else {
    clearInterval(intervalId);
  }
}, 1000);
